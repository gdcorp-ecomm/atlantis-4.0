<?xml version="1.0" encoding="utf-8" ?>
<RuleEngine>
  <Rules>
    <RuleMain id="RSeMain">
       <Actions>
        <Execute ruleId="RSeCountryRequired" />
        <Execute ruleId="RSeRegIdRequired" />
        <Execute ruleId="RSeSeVatValid" />
      </Actions>
    </RuleMain>
    <Rule id="RSeCountryRequired">
      <Condition><![CDATA[ ISNULLOREMPTY(FACT(FCompanyCode)) ]]></Condition>
      <Actions>
        <EvaluateIsValid factId="FCompanyCode" result="true">false</EvaluateIsValid>
        <EvaluateMessage factId="FCompanyCode" result="true"><![CDATA[ "Country is required."]]></EvaluateMessage>
      </Actions>
    </Rule>
    <Rule id="RSeRegIdRequired">
      <Condition><![CDATA[ ISNULLOREMPTY(FACT(FRegId)) ]]></Condition>
      <Actions>
        <EvaluateIsValid factId="FRegId" result="True">false</EvaluateIsValid>
        <EvaluateMessage factId="FRegId" result="True"><![CDATA[ "Registration Id is required."]]></EvaluateMessage>
      </Actions>
    </Rule>
    <Rule id="RSeSeVatValid">
      <Condition>
        <![CDATA[ FACT(FCompanyCode) == "AL" OR
                  FACT(FCompanyCode) == "AT" OR
                  FACT(FCompanyCode) == "BY" OR
                  FACT(FCompanyCode) == "BE" OR
                  FACT(FCompanyCode) == "BA" OR
                  FACT(FCompanyCode) == "BG" OR
                  FACT(FCompanyCode) == "HR" OR
                  FACT(FCompanyCode) == "CY" OR
                  FACT(FCompanyCode) == "CZ" OR
                  FACT(FCompanyCode) == "DK" OR
                  FACT(FCompanyCode) == "EE" OR
                  FACT(FCompanyCode) == "FO" OR
                  FACT(FCompanyCode) == "FI" OR
                  FACT(FCompanyCode) == "FR" OR
                  FACT(FCompanyCode) == "DE" OR
                  FACT(FCompanyCode) == "GI" OR
                  FACT(FCompanyCode) == "GR" OR
                  FACT(FCompanyCode) == "GG" OR
                  FACT(FCompanyCode) == "HU" OR
                  FACT(FCompanyCode) == "IS" OR
                  FACT(FCompanyCode) == "IE" OR
                  FACT(FCompanyCode) == "IM" OR
                  FACT(FCompanyCode) == "IT" OR
                  FACT(FCompanyCode) == "JE" OR
                  FACT(FCompanyCode) == "LV" OR
                  FACT(FCompanyCode) == "LI" OR
                  FACT(FCompanyCode) == "LT" OR
                  FACT(FCompanyCode) == "LU" OR
                  FACT(FCompanyCode) == "MK" OR
                  FACT(FCompanyCode) == "MT" OR
                  FACT(FCompanyCode) == "MD" OR
                  FACT(FCompanyCode) == "MC" OR
                  FACT(FCompanyCode) == "ME" OR
                  FACT(FCompanyCode) == "NL" OR
                  FACT(FCompanyCode) == "NO" OR
                  FACT(FCompanyCode) == "PL" OR
                  FACT(FCompanyCode) == "PT" OR
                  FACT(FCompanyCode) == "RO" OR
                  FACT(FCompanyCode) == "SM" OR
                  FACT(FCompanyCode) == "RS" OR
                  FACT(FCompanyCode) == "SK" OR
                  FACT(FCompanyCode) == "SI" OR
                  FACT(FCompanyCode) == "ES" OR
                  FACT(FCompanyCode) == "SJ" OR
                  FACT(FCompanyCode) == "SE" OR
                  FACT(FCompanyCode) == "CH" OR
                  FACT(FCompanyCode) == "UA" OR
                  FACT(FCompanyCode) == "UK" OR
                  FACT(FCompanyCode) == "VA" ]]>
      </Condition>
      <Actions>
        <Execute ruleId="RSeEvaluateVat" result="true" />
      </Actions>
    </Rule>
    <Rule id="RSeEvaluateVat">
      <Condition><![CDATA[ ISNULLOREMPTY(FACT(FVat)) ]]></Condition>
      <Actions>
        <EvaluateIsValid factId="FVat" result="True">false</EvaluateIsValid>
        <EvaluateMessage factId="FVat" result="True"><![CDATA[ "VAT is required."]]></EvaluateMessage>
      </Actions>
    </Rule>
  </Rules>
  <Facts>
    <Fact id="FCompanyCode" key="companycode" desc="" type="string" modelId="mdlSe" />
    <Fact id="FVat" key="vat" desc="" type="string" modelId="mdlSe" />
    <Fact id="FRegId" key="regid" desc="" type="string" modelId="mdlSe" />
  </Facts>
</RuleEngine>
